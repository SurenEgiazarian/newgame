(()=>{"use strict";new(function(){function t(t){if(!(t instanceof HTMLElement))throw new Error("Передан не HTMLElement");this.element=t,this.difficulty="",this.min=0,this.sec=0,this.levels={1:6,2:12,3:18},this.start()}return t.prototype.start=function(){var t=this;this.element.innerHTML="";var e=document.createElement("div");e.classList.add("game__start-window");var i=document.createElement("h1");i.classList.add("game__header"),i.textContent="Выбери сложность";var a=document.createElement("div");a.classList.add("game__menu-difficulty");for(var n=1;n<=3;n++){var d=document.createElement("button");d.classList.add("difficulty"),d.textContent="".concat(n),d.setAttribute("data-difficulty","".concat(n)),a.appendChild(d)}var c=a.querySelectorAll(".difficulty"),s=document.createElement("button");s.classList.add("game__button","game__button_start"),s.textContent="Старт";var l=document.createElement("p");l.textContent="Выбери <br> сложность",l.classList.add("warning","warning_hidden"),e.appendChild(i),e.appendChild(a),e.appendChild(s),e.appendChild(l),this.element.appendChild(e),a.addEventListener("click",(function(e){var i=e.target;t.difficulty=i.dataset.difficulty,console.log(t.difficulty),c.forEach((function(e){e.dataset.difficulty==t.difficulty?(e.classList.add("difficulty_active"),l.classList.add("warning_hidden")):e.classList.remove("difficulty_active")}))})),s.addEventListener("click",(function(){""===t.difficulty||void 0===t.difficulty?l.classList.remove("warning_hidden"):t.gameWindow()}))},t.prototype.gameWindow=function(){var t=this;console.log("загрузка");var e=["6C","6D","6H","6S","7C","7D","7H","7S","8C","8D","8H","8S","9C","9D","9H","9S","TC","TD","TH","TS","JC","JD","JH","JS","QC","QD","QH","QS","KC","KD","KH","KS","AC","AD","AH","AS"],i=[];this.element.innerHTML="",this.element.classList.add("position-top");var a=document.createElement("div");a.classList.add("game__menu");var n=document.createElement("div");n.classList.add("game__time");var d=document.createElement("div");d.classList.add("game__time-titles");var c=document.createElement("div");c.classList.add("game__time-title","game__time-title_min"),c.textContent="min";var s=document.createElement("div");s.classList.add("game__time-title","game__time-title_sec"),s.textContent="sec";var l=document.createElement("div");l.classList.add("game__time-digits");var o=document.createElement("div");o.classList.add("game__time-digit","game__time-digit_min"),o.textContent="00";var r=document.createElement("div");r.textContent=".",r.classList.add("game__time-digit");var m=document.createElement("div");m.classList.add("game__time-digit","game__time-digit_sec"),m.textContent="00",d.appendChild(c),d.appendChild(s),l.appendChild(o),l.appendChild(r),l.appendChild(m),n.appendChild(d),n.appendChild(l);var u=document.createElement("button");u.classList.add("game__button","game__button_play-again"),u.textContent="Начать заново",a.appendChild(n),a.appendChild(u);var _=document.createElement("div");_.classList.add("game__card-field");for(var g=1;g<=this.levels[Number(this.difficulty)]/2;g++){var h=e[Math.floor(Math.random()*e.length)];i.push(h)}for(i=(i=i.concat(i)).sort((function(){return Math.random()-.5})),console.log(i),g=0;g<=this.levels[Number(this.difficulty)]-1;g++){(h=document.createElement("div")).classList.add("game__card");var p=document.createElement("img");p.setAttribute("src","./static/img/shirt.svg"),p.classList.add("card"),h.appendChild(p),p.setAttribute("data-card","".concat(i[g])),_.appendChild(h)}this.element.appendChild(a),this.element.appendChild(_);var v=document.querySelectorAll(".card");u.addEventListener("click",(function(){t.element.classList.remove("position-top"),t.start()})),setTimeout((function(){v.forEach((function(t){t.setAttribute("src","./static/img/".concat(t.dataset.card,".svg"))})),t.gameStart()}),1e3)},t.prototype.gameStart=function(){var t=this;console.log("игра");var e=document.querySelectorAll(".card");setTimeout((function(){e.forEach((function(t){t.setAttribute("src","./static/img/shirt.svg")})),t.cardСompare()}),5e3)},t.prototype.cardСompare=function(){var t=this,e=0,i=document.querySelector(".game__time-digit_sec"),a=document.querySelector(".game__time-digit_min"),n=setInterval((function(){e+=1/60,this.sec=Math.floor(e)-60*Math.floor(e/60),this.min=Math.floor(e/60),i.textContent=this.sec<10?"0"+this.sec.toString():this.sec.toString(),a.textContent=this.min<10?"0"+this.min.toString():this.min.toString()}),1e3/60),d="",c="",s=0;console.log(this.levels[Number(this.difficulty)]),document.querySelector(".game__card-field").addEventListener("click",(function(e){var i=e.target;i.dataset.card&&""===d?(i.setAttribute("src","./static/img/".concat(i.dataset.card,".svg")),d=i.dataset.card,s++,console.log(s)):i.dataset.card&&""!==d&&""===c&&(i.setAttribute("src","./static/img/".concat(i.dataset.card,".svg")),c=i.dataset.card,s++,console.log(s),d===c?(d="",c="",s===t.levels[Number(t.difficulty)]&&(t.win(),clearInterval(n))):(t.lose(),clearInterval(n)))}))},t.prototype.win=function(){var t=this,e=document.createElement("div");e.classList.add("game__final-window");var i=document.createElement("img");i.classList.add("game__final-img"),i.setAttribute("src","./static/img/win.png");var a=document.createElement("h1");a.classList.add("game__header"),a.textContent="Вы выиграли!";var n=document.createElement("h3");n.classList.add("game__final-time-title"),n.textContent="Затраченное время:";var d=document.querySelector(".game__time-digit_min"),c=document.querySelector(".game__time-digit_sec"),s=document.createElement("div");s.classList.add("game__final-time-digit"),s.textContent="".concat(d.textContent,".").concat(c.textContent," ");var l=document.createElement("button");l.classList.add("game__button","game__button_play-again"),l.textContent="Играть снова",e.appendChild(i),e.appendChild(a),e.appendChild(n),e.appendChild(s),e.appendChild(l),this.element.appendChild(e),l.addEventListener("click",(function(){t.element.classList.remove("position-top"),t.start()})),this.min=0,this.sec=0},t.prototype.lose=function(){var t=this,e=document.createElement("div");e.classList.add("game__final-window");var i=document.createElement("img");i.classList.add("game__final-img"),i.setAttribute("src","./static/img/lose.png");var a=document.createElement("h1");a.classList.add("game__header"),a.textContent="Вы проиграли!";var n=document.createElement("h3");n.classList.add("game__final-time-title"),n.textContent="Затраченное время:";var d=document.createElement("div");d.classList.add("game__final-time-digit"),d.textContent="".concat(document.querySelector(".game__time-digit_min").textContent,".").concat(document.querySelector(".game__time-digit_sec").textContent," ");var c=document.createElement("button");c.classList.add("game__button","game__button_play-again"),c.textContent="Играть снова",e.appendChild(i),e.appendChild(a),e.appendChild(n),e.appendChild(d),e.appendChild(c),this.element.appendChild(e),c.addEventListener("click",(function(){t.element.classList.remove("position-top"),t.start()})),this.min=0,this.sec=0},t}())(document.querySelector(".game"))})();